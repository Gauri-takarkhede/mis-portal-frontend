<h2 class="m-3">All Bonafide Requests</h2>

<table mat-table [dataSource]="requests" class="mat-elevation-z2 w-100">
  <!-- Student -->
  <ng-container matColumnDef="student">
    <th mat-header-cell *matHeaderCellDef>Student</th>
    <td mat-cell *matCellDef="let r">
      {{ r.studentName }} ({{ r.studentMis }})
    </td>
  </ng-container>

  <!-- Reason -->
  <ng-container matColumnDef="reason">
    <th mat-header-cell *matHeaderCellDef>Reason</th>
    <td mat-cell *matCellDef="let r">{{ r.reason }}</td>
  </ng-container>

  <!-- Status -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td
      mat-cell
      *matCellDef="let r"
      [ngClass]="{
        'text-warning': r.status === 'PENDING',
        'text-success': r.status === 'APPROVED',
        'text-danger': r.status === 'REJECTED',
      }"
    >
      {{ r.status | titlecase }}
    </td>
  </ng-container>

  <!-- Actions -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let r">
      <button
        class="btn btn-primary"
        type="button"
        (click)="approve(r.id)"
        *ngIf="r.status === 'PENDING'"
      >
        Approve
      </button>
      <button
        class="btn btn-danger"
        type="button"
        (click)="reject(r.id)"
        *ngIf="r.status === 'PENDING'"
      >
        Reject
      </button>
    </td>
  </ng-container>

  <tr
    mat-header-row
    *matHeaderRowDef="['student', 'reason', 'status', 'actions']"
  ></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['student', 'reason', 'status', 'actions']"
  ></tr>
</table>
