<h2 class="m-3">All Bonafide Requests</h2>

<table mat-table [dataSource]="requests" class="mat-elevation-z2 w-100">
  <!-- Student -->
  <ng-container matColumnDef="student">
    <th mat-header-cell *matHeaderCellDef>Student</th>
    <td mat-cell *matCellDef="let r">
      {{ r.studentId?.name }} ({{ r.studentId?.mis }})
    </td>
  </ng-container>

  <!-- Reason -->
  <ng-container matColumnDef="reason">
    <th mat-header-cell *matHeaderCellDef>Reason</th>
    <td mat-cell *matCellDef="let r">{{ r.reason }}</td>
  </ng-container>

  <!-- Status -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let r">{{ r.status }}</td>
  </ng-container>

  <!-- Actions -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <td mat-cell *matCellDef="let r">
      <button
        class="btn btn-primary"
        type="button"
        (click)="approve(r._id)"
        *ngIf="r.status === 'pending'"
      >
        Approve
      </button>
      <button
        class="btn btn-danger"
        type="button"
        (click)="reject(r._id)"
        *ngIf="r.status === 'pending'"
      >
        Reject
      </button>
    </td>
  </ng-container>

  <tr
    mat-header-row
    *matHeaderRowDef="['student', 'reason', 'status', 'actions']"
  ></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['student', 'reason', 'status', 'actions']"
  ></tr>
</table>
